
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Investology Crypto</title>

   
    <script>
    if (!localStorage.getItem('currentUser')) {
        window.location.href = 'index.html';
    } else {
        const user = JSON.parse(localStorage.getItem('currentUser'));
        if (user.username !== "Rose2317") {
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        }
    }
    </script>
    
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Settings Dropdown Styles -->
    <style>
        /* Settings Button and Dropdown Styles */
        .settings-container {
            position: relative;
            z-index: 1001; /* Increased z-index */
        }
        
        .settings-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.4rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 1002; /* Higher than container */
        }
        
        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
            box-shadow: 0 0 20px rgba(0, 212, 170, 0.3);
        }
        
        .settings-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.98));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            min-width: 240px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6);
            z-index: 9999; /* Very high z-index to ensure it's on top */
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            margin-top: 10px;
            border-top: 3px solid #00d4aa;
        }
        
        .settings-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .dropdown-header {
            padding: 18px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .dropdown-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .dropdown-user-info {
            flex: 1;
        }
        
        .dropdown-username {
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            display: block;
        }
        
        .dropdown-vip {
            font-size: 0.75rem;
            color: #fbbf24;
            background: rgba(245, 158, 11, 0.2);
            padding: 3px 10px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 4px;
            font-weight: 600;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .dropdown-item {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: #a0aec0;
            position: relative;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: white;
            padding-left: 24px;
        }
        
        .dropdown-item:hover::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #00d4aa;
            border-radius: 0 4px 4px 0;
        }
        
        .dropdown-item.logout:hover {
            background: rgba(220, 38, 38, 0.15);
            color: #f87171;
        }
        
        .dropdown-item.logout:hover::before {
            background: #f87171;
        }
        
        .dropdown-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        .dropdown-text {
            font-size: 0.95rem;
            font-weight: 500;
            flex: 1;
        }
        
        .dropdown-arrow {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        /* Confirmation Modal Styles */
        .logout-confirm-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(12px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .logout-confirm-modal.active {
            display: flex;
        }
        
        .logout-modal-content {
            background: linear-gradient(145deg, #0f172a, #1e293b);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
            transform: scale(0.9);
            animation: modalSlideIn 0.3s ease forwards;
            border-top: 4px solid #f59e0b;
            position: relative;
            overflow: hidden;
        }
        
        .logout-modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }
        
        .logout-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            display: block;
            color: #f59e0b;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .logout-modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: white;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .logout-modal-message {
            color: #a0aec0;
            line-height: 1.6;
            margin-bottom: 25px;
            font-size: 0.95rem;
            padding: 0 10px;
        }
        
        .logout-modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .logout-btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            padding: 14px 28px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .logout-btn-cancel:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
        }
        
        .logout-btn-confirm {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: none;
            border-radius: 12px;
            color: white;
            padding: 14px 28px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .logout-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.5);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .settings-dropdown {
                position: fixed;
                top: 70px;
                right: 20px;
                left: 20px;
                min-width: auto;
                z-index: 9999;
            }
            
            .logout-modal-content {
                padding: 24px;
            }
            
            .logout-modal-actions {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .settings-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .settings-dropdown {
                top: 65px;
                right: 10px;
                left: 10px;
                z-index: 9999;
            }
            
            .dropdown-item {
                padding: 14px 18px;
            }
        }
        
        /* Ensure app-container has lower z-index */
        .app-container {
            position: relative;
            z-index: 1;
        }
        
        /* Ensure main content has lower z-index */
        .account-content {
            position: relative;
            z-index: 1;
        }
        
        /* Ensure header has proper z-index */
        .app-header.premium-header {
            position: relative;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="background-particles"></div>

    <div class="app-container">
        <header class="app-header premium-header">
            <div class="header-center">My Account</div>
            <div class="header-right">
                <div class="settings-container">
                    <button class="settings-btn" id="settings-btn">‚öôÔ∏è</button>
                    <div class="settings-dropdown" id="settings-dropdown">
                        <div class="dropdown-header">
                            <div class="dropdown-avatar">R</div>
                            <div class="dropdown-user-info">
                                <span class="dropdown-username" id="dropdown-username">Rose2317</span>
                                <span class="dropdown-vip">VIP4</span>
                            </div>
                        </div>
                        
                        <div class="dropdown-item" onclick="window.location.href='account.html'">
                            <span class="dropdown-icon">üë§</span>
                            <span class="dropdown-text">My Account</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                        
                        <div class="dropdown-item" onclick="window.location.href='membership.html'">
                            <span class="dropdown-icon">üíé</span>
                            <span class="dropdown-text">VIP Membership</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                        
                        <div class="dropdown-item" onclick="window.location.href='deposit.html'">
                            <span class="dropdown-icon">üí∞</span>
                            <span class="dropdown-text">Deposit Funds</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                        
                        <div class="dropdown-item" onclick="window.location.href='withdraw.html'">
                            <span class="dropdown-icon">üè¶</span>
                            <span class="dropdown-text">Withdraw Funds</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                        
                        <div class="dropdown-item" onclick="showSecuritySettings()">
                            <span class="dropdown-icon">üîí</span>
                            <span class="dropdown-text">Security</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                        
                        <div class="dropdown-item logout" onclick="showLogoutConfirmation()">
                            <span class="dropdown-icon">üö™</span>
                            <span class="dropdown-text">Logout</span>
                            <span class="dropdown-arrow">‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="account-content">
            <!-- Profile -->
            <section class="account-profile glass-card premium-card">
                <div class="profile-avatar glowing-avatar">R</div>
                <div class="profile-info">
                    <h2 id="account-username">Rose2317</h2>
                    <span class="vip-badge vip6 glowing-vip">VIP4</span>
                </div>
            </section>

            <!-- Balance -->
            <section class="account-balance glass-card premium-card">
                <div class="balance-item main-balance">
                    <span class="balance-label">My Assets (USDT)</span>
                    <span class="balance-value gradient-text" id="account-balance">26,660,222</span>
                </div>

                <div class="balance-divider"></div>

                <div class="balance-item deposit-row">
                    <div class="deposit-info">
                        <span class="balance-label">Deposit (USDT)</span>
                        <span class="balance-value gradient-text" id="account-deposit">18,000</span>
                    </div>
                    <button class="btn-refund premium-btn" onclick="showRefundPopup()">Apply for Refund</button>
                </div>
            </section>

            <!-- Refund Popup -->
            <div id="refund-popup" class="modal-overlay" style="display: none;">
                <div class="modal-content glass-card">
                    <button class="modal-close" onclick="closeRefundPopup()">√ó</button>
                    <h2 class="modal-title">Refund Status</h2>
                    <p class="modal-message">You have already applied for refund. It will be received into your account soon.</p>
                    <button class="btn-confirm premium-btn" onclick="closeRefundPopup()">OK</button>
                </div>
            </div>

            <!-- Quick Actions ‚Äì Responsive Grid -->
            <section class="quick-actions premium-actions">
                <div class="action-grid">
                    <div class="action-card premium-action" onclick="window.location.href='deposit.html'">
                        <span class="action-icon premium-icon">üí≥</span>
                        <span>Deposit</span>
                    </div>
                    <div class="action-card premium-action" onclick="window.location.href='withdraw.html'">
                        <span class="action-icon premium-icon">üè¶</span>
                        <span>Withdraw</span>
                    </div>
                    <div class="action-card premium-action" onclick="window.location.href='transfer.html'">
                        <span class="action-icon premium-icon">üí∏</span>
                        <span>Internal Transfer</span>
                    </div>
                    <div class="action-card premium-action highlight-vip" onclick="window.location.href='membership.html'">
                        <span class="action-icon premium-icon">üíé</span>
                        <span>Membership Upgrade</span>
                    </div>
                </div>
            </section>

            <!-- Expandable Menu Sections -->
            <section class="menu-section">
                <div class="menu-item accordion premium-accordion" data-target="msg-notification">
                    <span class="menu-icon premium-icon">üîî</span>
                    <span class="menu-text">Message Notification</span>
                    <span class="menu-arrow">‚ñº</span>
                </div>
                <div id="msg-notification" class="accordion-content">
                    <div class="accordion-body">
                        <h4>Recent Notifications</h4>
                        <ul>
                            <li><strong>Today 09:12</strong> - Your VIP6 daily limit has been reset</li>
                            <li><strong>Yesterday</strong> - Deposit of 50,000 USDT confirmed</li>
                        </ul>
                    </div>
                </div>

                <div class="menu-item accordion premium-accordion" data-target="quick-buy">
                    <span class="menu-icon premium-icon">üí∞</span>
                    <span class="menu-text">Quick Buy</span>
                    <span class="menu-arrow">‚ñº</span>
                </div>
                <div id="quick-buy" class="accordion-content">
                    <div class="accordion-body">
                        <h4>Instant Purchase</h4>
                        <p>Buy crypto with one tap:</p>
                        <div class="quick-buy-grid">
                            <button class="quick-btn premium-btn">BTC</button>
                            <button class="quick-btn premium-btn">ETH</button>
                            <button class="quick-btn premium-btn">USDT</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item accordion premium-accordion" data-target="help-center">
                    <span class="menu-icon premium-icon">‚ùì</span>
                    <span class="menu-text">Help Center</span>
                    <span class="menu-arrow">‚ñº</span>
                </div>
                <div id="help-center" class="accordion-content">
                    <div class="accordion-body">
                        <h4>Support & FAQ</h4>
                        <p>Common questions and quick answers.</p>
                        <a href="#" class="help-link">View Full Help Center ‚Üí</a>
                    </div>
                </div>

                <div class="menu-item accordion premium-accordion" data-target="language-switch">
                    <span class="menu-icon premium-icon">üí¨</span>
                    <span class="menu-text">Language Switch</span>
                    <span class="menu-arrow">‚ñº</span>
                </div>
                <div id="language-switch" class="accordion-content">
                    <div class="accordion-body">
                        <h4>Choose Language</h4>
                        <div class="lang-options">
                            <button class="lang-btn active premium-btn">English</button>
                            <button class="lang-btn premium-btn">‰∏≠Êñá</button>
                            <button class="lang-btn premium-btn">Espa√±ol</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Transaction History Section ‚Äì Responsive -->
            <section class="transaction-history glass-card premium-card">
                <div class="history-header">
                    <h3>Transaction History</h3>
                    <span class="history-filter">Last 30 days</span>
                </div>

                <div class="history-table-wrapper">
                    <table class="history-table">
                        <thead>
                            <tr>
                               
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Date & Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                
                                <td>Deposit</td>
                                <td class="amount positive">+85,000.00 USDT</td>
                                <td><span class="status completed">Completed</span></td>
                                <td>2026-01-13 14:32</td>
                            </tr>
                            <tr>
                                
                                <td>Internal Transfer</td>
                                <td class="amount negative">-25,000.00 USDT</td>
                                <td><span class="status completed">Completed</span></td>
                                <td>2026-01-11 09:15</td>
                            </tr>
                            <tr>
                                
                                <td>Trade Peofit</td>
                                <td class="amount positive">+12,000.00 USDT</td>
                                <td><span class="status pending">Pending</span></td>
                                <td>2026-01-09 22:47</td>
                            </tr>
                            <tr>
                                
                                <td>Withdraw</td>
                                <td class="amount negative">-100,000.00 USDT</td>
                                <td><span class="status completed">Completed</span></td>
                                <td>2026-01-07 11:05</td>
                            </tr>
                            <tr>
                                
                                <td>Deposit</td>
                                <td class="amount positive">+450,000.00 USDT</td>
                                <td><span class="status completed">Completed</span></td>
                                <td>2026-01-04 03:18</td>
                                
                            </tr>
                            <tr>
                                
                                <td>Trade Profit</td>
                                <td class="amount positive">+18,750.00 USDT</td>
                                <td><span class="status completed">Completed</span></td>
                                <td>2026-01-01 17:40</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="history-footer">
                    <button class="btn-load-more premium-btn">Load More Transactions</button>
                </div>
            </section>

            <button class="btn-switch-account premium-btn" onclick="showLogoutConfirmation()">Switch to another account</button>
        </main>

        <nav class="bottom-nav premium-nav">
            <a href="home.html" class="nav-item">
                <span>Home</span>
            </a>
            <a href="trade.html" class="nav-item">
                <span>Trade</span>
            </a>
            <a href="transfer.html" class="nav-item">
                <span>Transfer</span>
            </a>
            <a href="account.html" class="nav-item active">
                <span>Account</span>
            </a>
        </nav>
    </div>

    <!-- Logout Confirmation Modal -->
    <div class="logout-confirm-modal" id="logout-confirm-modal">
        <div class="logout-modal-content">
            <div class="logout-icon">üö™</div>
            <h2 class="logout-modal-title">Confirm Logout</h2>
            <p class="logout-modal-message">Are you sure you want to logout from your account? You will need to login again to access your account.</p>
            <div class="logout-modal-actions">
                <button class="logout-btn-cancel" onclick="hideLogoutConfirmation()">Cancel</button>
                <button class="logout-btn-confirm" onclick="performLogout()">Yes, Logout</button>
            </div>
        </div>
    </div>

    <script type="module" src="account.js"></script>
    <script type="module" src="config.js"></script>

    <!-- Settings Dropdown and Logout JavaScript -->
    <script>
        // Toggle settings dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const settingsBtn = document.getElementById('settings-btn');
            const settingsDropdown = document.getElementById('settings-dropdown');
            
            // Toggle dropdown on button click
            settingsBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                e.preventDefault();
                settingsDropdown.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!settingsDropdown.contains(e.target) && !settingsBtn.contains(e.target)) {
                    settingsDropdown.classList.remove('active');
                }
            });
            
            // Close dropdown when clicking on a dropdown item (except for the current page)
            document.querySelectorAll('.dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    // Only close if not clicking on "My Account" while on account page
                    const text = this.querySelector('.dropdown-text').textContent;
                    if (text !== "My Account") {
                        settingsDropdown.classList.remove('active');
                    }
                });
            });
            
            // Update dropdown username from localStorage
            const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (user.displayName) {
                document.getElementById('dropdown-username').textContent = user.displayName;
            }
            
            // Close dropdown on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    settingsDropdown.classList.remove('active');
                }
            });
        });
        
        // Show logout confirmation modal
        function showLogoutConfirmation() {
            document.getElementById('logout-confirm-modal').classList.add('active');
            // Close settings dropdown if open
            document.getElementById('settings-dropdown').classList.remove('active');
        }
        
        // Hide logout confirmation modal
        function hideLogoutConfirmation() {
            document.getElementById('logout-confirm-modal').classList.remove('active');
        }
        
        // Perform logout
        function performLogout() {
            // Clear localStorage (removes user session)
            localStorage.removeItem('currentUser');
            
            // Clear any other session data if needed
            sessionStorage.clear();
            
            // Show logout success message (optional)
            const logoutModal = document.querySelector('.logout-modal-content');
            logoutModal.innerHTML = `
                <div class="logout-icon" style="color: #00d4aa;">‚úÖ</div>
                <h2 class="logout-modal-title" style="background: linear-gradient(135deg, #00d4aa, #009688); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Logged Out Successfully</h2>
                <p class="logout-modal-message">You have been logged out successfully. Redirecting to login page...</p>
            `;
            
            // Redirect to login page after 1.5 seconds
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1500);
        }
        
        // Security settings placeholder function
        function showSecuritySettings() {
            // Close dropdown first
            document.getElementById('settings-dropdown').classList.remove('active');
            
            // Show security settings message
            const logoutModal = document.getElementById('logout-confirm-modal');
            const modalContent = document.querySelector('.logout-modal-content');
            
            modalContent.innerHTML = `
                <div class="logout-icon" style="color: #667eea;">üîí</div>
                <h2 class="logout-modal-title" style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Security Settings</h2>
                <p class="logout-modal-message">Advanced security features including 2FA, session management, and login history will be available in the next update.</p>
                <div class="logout-modal-actions">
                    <button class="logout-btn-confirm" onclick="hideLogoutConfirmation()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">OK</button>
                </div>
            `;
            
            logoutModal.classList.add('active');
        }
        
        // Refund Popup Functions (existing)
        function showRefundPopup() {
            document.getElementById('refund-popup').style.display = 'flex';
        }

        function closeRefundPopup() {
            document.getElementById('refund-popup').style.display = 'none';
        }
        
        // Accordion JS (existing)
        document.querySelectorAll('.accordion').forEach(item => {
            item.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const content = document.getElementById(targetId);
                const arrow = this.querySelector('.menu-arrow');

                document.querySelectorAll('.accordion-content.active').forEach(el => {
                    if (el !== content) {
                        el.classList.remove('active');
                        el.style.maxHeight = null;
                        const otherArrow = el.previousElementSibling?.querySelector('.menu-arrow');
                        if (otherArrow) otherArrow.textContent = '‚ñº';
                    }
                });

                if (content.classList.contains('active')) {
                    content.classList.remove('active');
                    content.style.maxHeight = null;
                    arrow.textContent = '‚ñº';
                } else {
                    content.classList.add('active');
                    content.style.maxHeight = content.scrollHeight + "px";
                    arrow.textContent = '‚ñ≤';
                }
            });
        });
    </script>
</body>
                                              </html>
